# Chapter 5. ëŒë‹¤ë¡œ í”„ë¡œê·¸ë˜ë°

## 1. ëŒë‹¤ ì‹ê³¼ ë©¤ë²„ ì°¸ì¡°

---

- ëŒë‹¤ì‹/ëŒë‹¤: ë‹¤ë¥¸ í•¨ìˆ˜ì— ë„˜ê¸¸ ìˆ˜ ìˆëŠ” ì‘ì€ ì½”ë“œ ì¡°ê°
    
    ![Untitled](./image/5/Untitled.png)
    

### 1-1. ëŒë‹¤ ì†Œê°œ: ì½”ë“œ ë¸”ë¡ì„ í•¨ìˆ˜ ì¸ìë¡œ ë„˜ê¸°ê¸°

---

- í´ë˜ìŠ¤ë¥¼ ì„ ì–¸í•˜ê³  ê·¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•¨ìˆ˜ì— ë„˜ê¸°ëŠ” ëŒ€ì‹  í•¨ìˆ˜í˜• ì–¸ì–´ì—ì„œëŠ” í•¨ìˆ˜ë¥¼ ì§ì ‘ ë‹¤ë¥¸ í•¨ìˆ˜ì— ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.****
- ëŒë‹¤ ì‹ì„ ì‚¬ìš©í•˜ë©´ ì½”ë“œê°€ ë”ìš± ë” ê°„ê²°í•´ì§„ë‹¤. ëŒë‹¤ ì‹ì„ ì‚¬ìš©í•˜ë©´ í•¨ìˆ˜ë¥¼ ì„ ì–¸í•  í•„ìš”ê°€ ì—†ê³  ì½”ë“œ ë¸”ë¡ì„ ì§ì ‘ í•¨ìˆ˜ì˜ ì¸ìë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.

- ë¬´ëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¡œ ë¦¬ìŠ¤ë„ˆ êµ¬í˜„í•˜ê¸°
    
    ```java
    /* Java */
    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            /* actions on click */
        }
    });
    ```
    
- ëŒë‹¤ë¡œ ë¦¬ìŠ¤ë„ˆ êµ¬í˜„í•˜ê¸°
    
    ```kotlin
    button.setOnClickListener { /* actions on click */ }
    ```
    

ğŸ‘‰ ëŒë‹¤ë¥¼ ë©”ì„œë“œê°€ í•˜ë‚˜ë¿ì¸ ë¬´ëª… ê°ì²´ ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### 1-2. ëŒë‹¤ì™€ ì»¬ë ‰ì…˜

---

- ì½”ë“œì—ì„œ ì¤‘ë³µì„ ì œê±°í•˜ëŠ” ê²ƒì€ í”„ë¡œê·¸ë˜ë° ìŠ¤íƒ€ì¼ì„ ê°œì„ í•˜ëŠ” ì¤‘ìš”í•œ ë°©ë²• ì¤‘ í•˜ë‚˜ë‹¤.
- ëŒë‹¤ê°€ ì—†ë‹¤ë©´ ì»¬ë ‰ì…˜ì„ í¸ë¦¬í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•˜ê¸° í˜ë“¤ë‹¤.

- ì»¬ë ‰ì…˜ì„ ì§ì ‘ ê²€ìƒ‰í•˜ê¸°
    
    ```kotlin
    data class Person(val name: String, val age: Int)
    
    /* Java */
    fun findTheOldest(people: List<Person>) {
        var maxAge = 0
        var theOldest: Person? = null
        for (person in people) {
            if (person.age > maxAge) {
                maxAge = person.age
                theOldest = person
            }
        }
        println(theOldest)
    }
    
    fun main(args: Array<String>) {
        val people = listOf(Person("Alice", 29), Person("Bob", 31))
        findTheOldest(people) // Person(name=Bob, age=31)
    }
    ```
    
- ëŒë‹¤ë¥¼ ì‚¬ìš©í•´ ì»¬ë ‰ì…˜ ê²€ìƒ‰í•˜ê¸°
    
    ```kotlin
    >>> val people = listOf(Person("Alice", 29), Person("Bob", 31))
    >>> println(people.maxBy { it.age })
    Person(name=Bob, age=31)
    ```
    
- ì´ëŸ° ì‹ìœ¼ë¡œ ë‹¨ì§€ í•¨ìˆ˜ë‚˜ í”„ë¡œí¼í‹°ë¥¼ ë°˜í™˜í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ëŒë‹¤ëŠ” ë©¤ë²„ ì°¸ì¡°ë¡œ ëŒ€ì¹˜í•  ìˆ˜ ìˆë‹¤.****
    
    ```kotlin
    people.maxBy(Person::age)
    ```
    

ğŸ‘‰ ëŒë‹¤ë‚˜ ë©¤ë²„ ì°¸ì¡°ë¥¼ ì¸ìë¡œ ë°›ëŠ” í•¨ìˆ˜ë¥¼ í†µí•´ ê°œì„ í•œ ì½”ë“œëŠ” ë” ì§§ê³  ë” ì´í•´í•˜ê¸° ì‰½ë‹¤.

### 1-3. ëŒë‹¤ ì‹ì˜ ë¬¸ë²•

---

- ëŒë‹¤ëŠ” ê°’ì²˜ëŸ¼ ì—¬ê¸°ì €ê¸° ì „ë‹¬í•  ìˆ˜ ìˆëŠ” ë™ì‘ì˜ ëª¨ìŒì´ë‹¤.
- ë³€ìˆ˜ì— ì €ì¥í•  ìˆ˜ë„ ìˆë‹¤.
    
    ```kotlin
    val sum = { x: Int, y: Int -> x + y }
    ```
    
- í•¨ìˆ˜ì— ì¸ìë¡œ ë„˜ê¸°ë©´ì„œ ë°”ë¡œ ëŒë‹¤ë¥¼ ì •ì˜í•˜ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì´ë‹¤.

![Untitled](./image/5/Untitled%201.png)

- ì½”í‹€ë¦° ëŒë‹¤ ì‹ì€ í•­ìƒ ì¤‘ê´„í˜¸ë¡œ ë‘˜ëŸ¬ì‹¸ì—¬ ìˆë‹¤.
    
    ```kotlin
    people.maxByOrNull({ p: Person -> p.age })
    ```
    
- ì¸ì ëª©ë¡ ì£¼ë³€ì— ê´„í˜¸ê°€ ì—†ë‹¤.
    
    ```java
    // java
    public class LambdaTest {
        public static void main(String[] args) {
            List<Person> people = new ArrayList<>();
            people.add(new Person("Kevin", 22));
            people.add(new Person("Alice", 32));
            people.add(new Person("Jenny", 33));
    
            List<String> results = people.stream()
                **.map((Person p) -> p.getName())**
                .collect(Collectors.toList());
    
            System.out.println(results);
        }
    }
    ```
    
    - ìë°”ëŠ” íƒ€ì…ì„ ì¤„ ë•Œ ì¸ì ì£¼ë³€ì— ê´„í˜¸ë¥¼ ì•ˆí•˜ë©´ ì•ˆëœë‹¤.
        
        ```java
        .map(p -> p.getName()) // ì»´íŒŒì¼ëŸ¬ê°€ íƒ€ì… ì¶”ë¡ í•˜ê²Œ í•˜ë©´ ê´„í˜¸ ì•ˆí•´ë„ ê´œì°®ë‹¤.
        ```
        
        ![Untitled](./image/5/Untitled%202.png)
        
- ì›í•œë‹¤ë©´ ëŒë‹¤ ì‹ì„ ì§ì ‘ í˜¸ì¶œí•´ë„ ëœë‹¤.
    
    ```kotlin
    { println(42) }() // 42
    ```
    
    - ì½ê¸° ì–´ë µê³  ê·¸ë‹¤ì§€ ì“¸ëª¨ë„ ì—†ë‹¤.
    
    ğŸ‘‰ ì´ë ‡ê²Œ ì½”ë“œì˜ ì¼ë¶€ë¶„ì„ ë¸”ë¡ìœ¼ë¡œ ë‘˜ëŸ¬ì‹¸ ì‹¤í–‰í•  í•„ìš”ê°€ ìˆë‹¤ë©´ `run`ì„ ì‚¬ìš©í•œë‹¤.
    
    - `run`: ì¸ìë¡œ ë°›ì€ ëŒë‹¤ë¥¼ ì‹¤í–‰í•´ì£¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜
        
        ```kotlin
        run { println(sum(2, 3)) }
        ```
        
- ì½”í‹€ë¦°ì—ëŠ” í•¨ìˆ˜ í˜¸ì¶œ ì‹œ ë§¨ ë’¤ì— ìˆëŠ” ì¸ìê°€ ëŒë‹¤ ì‹ì´ë©´ ê·¸ ëŒë‹¤ë¥¼ ê´„í˜¸ ë°–ìœ¼ë¡œ ë¹¼ë‚¼ ìˆ˜ ìˆë‹¤.
    
    ```kotlin
    people.maxByOrNull() { p: Person -> p.age }
    ```
    
- ëŒë‹¤ê°€ ì–´ë–¤ í•¨ìˆ˜ì˜ ìœ ì¼í•œ ì¸ìì´ê³  ê´„í˜¸ ë’¤ì— ëŒë‹¤ë¥¼ ì¼ë‹¤ë©´ í˜¸ì¶œ ì‹œ ë¹ˆ ê´„í˜¸ë¥¼ ì—†ì• ë„ ëœë‹¤.
    
    ```kotlin
    people.maxByOrNull { p: Person -> p.age }
    ```
    
- ë¡œì»¬ ë³€ìˆ˜ì²˜ëŸ¼ ì»´íŒŒì¼ëŸ¬ëŠ” ëŒë‹¤ íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ë„ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤.
    
    ```kotlin
    people.maxByOrNull { p -> p.age }
    ```
    
- ëŒë‹¤ì˜ íŒŒë¼ë¯¸í„°ê°€ í•˜ë‚˜ë¿ì´ê³  ê·¸ íƒ€ì…ì„ ì»´íŒŒì¼ëŸ¬ê°€ ì¶”ë¡ í•  ìˆ˜ ìˆëŠ” ê²½ìš° `it`ì„ ë°”ë¡œ ì“¸ ìˆ˜ ìˆë‹¤.
    
    ```kotlin
    people.maxByOrNull { it.age }
    ```
    
    - ëŒë‹¤ ì•ˆì— ëŒë‹¤ê°€ ì¤‘ì²©ë˜ëŠ” ê²½ìš° ê° ëŒë‹¤ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ëª…ì‹œí•˜ëŠ” í¸ì´ ë‚«ë‹¤.
- ëŒë‹¤ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•  ë•ŒëŠ” íŒŒë¼ë¯¸í„°ì˜ íƒ€ì…ì„ ì¶”ë¡ í•  ë¬¸ë§¥ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ â†’ íŒŒë¼ë¯¸í„° íƒ€ì…ì„ ëª…ì‹œí•´ì•¼ í•œë‹¤.
    
    ```kotlin
    val getAge = { p: Person -> p.age }
    people.maxByOrNull(getAge)
    ```
    
- ë³¸ë¬¸ì´ ì—¬ëŸ¬ ì¤„ë¡œ ì´ë¤„ì§„ ê²½ìš° ë³¸ë¬¸ì˜ ë§¨ ë§ˆì§€ë§‰ì— ìˆëŠ” ì‹ì´ ëŒë‹¤ì˜ ê²°ê³¼ ê°’ì´ ëœë‹¤.
    
    ```kotlin
    val sum = { x: Int, y: Int ->
        println("Computing the sum of $x and $y...")
        x + y
    }
    println(sum(1, 2)) // 3
    ```
    

### 1-4. í˜„ì¬ ì˜ì—­ì— ìˆëŠ” ë³€ìˆ˜ì— ì ‘ê·¼

---

- ìë°” ë©”ì†Œë“œ ì•ˆì—ì„œ ë¬´ëª… ë‚´ë¶€ í´ë˜ìŠ¤ë¥¼ ì •ì˜í•  ë•Œ ë©”ì†Œë“œì˜ ë¡œì»¬ ë³€ìˆ˜ë¥¼ ë¬´ëª… ë‚´ë¶€ í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ëŒë‹¤ë¥¼ í•¨ìˆ˜ ì•ˆì—ì„œ ì •ì˜í•˜ë©´ í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ë¿ ì•„ë‹ˆë¼ ëŒë‹¤ ì •ì˜ì˜ ì•ì— ì„ ì–¸ëœ ë¡œì»¬ ë³€ìˆ˜ê¹Œì§€ ëŒë‹¤ì—ì„œ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
    - í•¨ìˆ˜ íŒŒë¼ë¯¸í„°ë¥¼ ëŒë‹¤ ì•ˆì—ì„œ ì‚¬ìš©í•˜ê¸°
        
        ```kotlin
        fun printMessagesWithPrefix(messages: Collection<String>, prefix: String) {
            messages.forEach {
                println("$prefix $it")
            }
        }
        ```
        
- ì½”í‹€ë¦°ì—ì„œëŠ” ìë°”ì™€ ë‹¬ë¦¬ ëŒë‹¤ì—ì„œ ëŒë‹¤ ë°– í•¨ìˆ˜ì— ìˆëŠ” íŒŒì´ë„ì´ ì•„ë‹Œ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆê³ , ê·¸ ë³€ìˆ˜ë¥¼ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤.
    
    ```kotlin
    fun printProblemCounts(responses: Collection<String>) {
        var clientErrors = 0
        var serverErrors = 0
        responses.forEach {
            if (it.startsWith("4")) {
                clientErrors++
            } else if (it.startsWith("5")) {
                serverErrors++
            }
        }
        println("$clientErrors client errors, $serverErrors server errors")
    }
    ```
    
- ì–´ë–»ê²Œ ê·¸ëŸ° ë™ì‘ì´ ê°€ëŠ¥í• ê¹Œ?
    - íŒŒì´ë„ ë³€ìˆ˜ë¥¼ í¬íší•œ ê²½ìš°: ëŒë‹¤ ì½”ë“œë¥¼ ë³€ìˆ˜ ê°’ê³¼ í•¨ê»˜ ì €ì¥
        
        ```kotlin
        val counter = Ref(0)
        val inc = { ++counter.value }
        ```
        
        - ë””ì»´íŒŒì¼
            
            ```java
            // java
            final Ref counter = new Ref(0);
            Function0 inc = (Function0)(new Function0() {
               // $FF: synthetic method
               // $FF: bridge method
               public Object invoke() {
                  return this.invoke();
               }
            
               public final int invoke() {
                  Ref var10000 = counter;
                  var10000.setValue(((Number)var10000.getValue()).intValue() + 1);
                  return ((Number)var10000.getValue()).intValue();
               }
            });
            ```
            
    - íŒŒì´ë„ì´ ì•„ë‹Œ ë³€ìˆ˜ë¥¼ í¬íší•œ ê²½ìš°: ë³€ìˆ˜ë¥¼ íŠ¹ë³„í•œ ë˜í¼ë¡œ ê°ì‹¸ì„œ ë˜í¼ì— ëŒ€í•œ ì°¸ì¡°ë¥¼ ëŒë‹¤ ì½”ë“œì™€ í•¨ê»˜ ì €ì¥í•œë‹¤.
        
        ```kotlin
        var counter2 = 0
        val inc2 = { ++counter2 }
        ```
        
        - ë””ì»´íŒŒì¼
            
            ```java
            // java
            final IntRef counter2 = new IntRef();
            counter2.element = 0;
            Function0 inc2 = (Function0)(new Function0() {
               // $FF: synthetic method
               // $FF: bridge method
               public Object invoke() {
                  return this.invoke();
               }
            
               public final int invoke() {
                  IntRef var10000 = counter2;
                  ++var10000.element;
                  return var10000.element;
               }
            });
            ```
            
- ëŒë‹¤ë¥¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë‚˜ ë‹¤ë¥¸ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œë¡œ í™œìš©í•˜ëŠ” ê²½ìš° í•¨ìˆ˜ í˜¸ì¶œì´ ëë‚œ ë‹¤ìŒì— ë¡œì»¬ ë³€ìˆ˜ê°€ ë³€ê²½ë  ìˆ˜ë„ ìˆë‹¤.
    
    ```kotlin
    fun tryToCountButtonClicks(button: Button) : Int {
    		var clicks = 0
    		button.onClick { clicks++ }
    		return clicks // í•­ìƒ 0ì„ ë°˜í™˜
    }
    ```
    
    - onClick í•¸ë“¤ëŸ¬ëŠ” í˜¸ì¶œë  ë•Œë§ˆë‹¤ clicks ì˜ ê°’ì„ ì¦ê°€ì‹œí‚¤ì§€ë§Œ ê·¸ ê°’ì˜ ë³€ê²½ì„ ê´€ì°°í•  ìˆ˜ëŠ” ì—†ë‹¤. í•¸ë“¤ëŸ¬ëŠ” tryToCountButtonClicks ê°€ clicks ë¥¼ ë°˜í™˜í•œ ë‹¤ìŒì— í˜¸ì¶œë˜ê¸° ë•Œë¬¸ì´ë‹¤.****
    
    â†’ ì œëŒ€ë¡œ êµ¬í˜„í•˜ë ¤ë©´ í´ë¦­ íšŸìˆ˜ë¥¼ ì„¸ëŠ” ì¹´ìš´í„° ë³€ìˆ˜ë¥¼ í•¨ìˆ˜ì˜ ë‚´ë¶€ê°€ ì•„ë‹ˆë¼ í´ë˜ìŠ¤ì˜ í”„ë¡œí¼í‹°ë‚˜ ì „ì—­ í”„ë¡œí¼í‹° ë“±ì˜ ìœ„ì¹˜ë¡œ ë¹¼ë‚´ì„œ ë‚˜ì¤‘ì— ë³€ìˆ˜ ë³€í™”ë¥¼ ì‚´í´ë³¼ ìˆ˜ ìˆê²Œ í•´ì•¼ í•œë‹¤.
    

### 1-5. ë©¤ë²„ ì°¸ì¡°

---

- ì½”í‹€ë¦°ì—ì„œëŠ” ìë°” 8ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ í•¨ìˆ˜ë¥¼ ê°’ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤. ì´ì¤‘ ì½œë¡ (`::`)ì„ ì‚¬ìš©í•œë‹¤.
    
    ```kotlin
    val getAge = Person::age
    ```
    
- `::`ì„ ì‚¬ìš©í•˜ëŠ” ì‹ì„ ë©¤ë²„ ì°¸ì¡°ë¼ê³  ë¶€ë¥¸ë‹¤.
    - í”„ë¡œí¼í‹°ë‚˜ ë©”ì„œë“œë¥¼ ë‹¨ í•˜ë‚˜ë§Œ í˜¸ì¶œí•˜ëŠ” í•¨ìˆ˜ ê°’ì„ ë§Œë“¤ì–´ì¤€ë‹¤.
        
        ![Untitled](./image/5/Untitled%203.png)
        
    - ê·¸ ë©¤ë²„ë¥¼ í˜¸ì¶œí•˜ëŠ” ëŒë‹¤ì™€ ê°™ì€ íƒ€ì…ì´ë‹¤.
        
        ```kotlin
        people.maxByOrNull(Person::age)
        people.maxByOrNull { p -> p.age }
        people.maxByOrNull { it.age }
        ```
        
    - ìµœìƒìœ„ì— ì„ ì–¸ëœ í•¨ìˆ˜ë‚˜ í”„ë¡œí¼í‹°ë¥¼ ì°¸ì¡°í•  ìˆ˜ë„ ìˆë‹¤.
        
        ```kotlin
        fun salute() = println("Salute!")
        >>> run(::salute) // ìµœìƒìœ„ í•¨ìˆ˜ë¥¼ ì°¸ì¡°í•œë‹¤.
        Salute!
        ```
        

- ë°”ìš´ë“œ ë©¤ë²„ ì°¸ì¡°
    - ì½”í‹€ë¦° 1.1 ë¶€í„°ëŠ” ë°”ìš´ë“œ ë©¤ë²„ ì°¸ì¡°ë¥¼ ì§€ì›í•œë‹¤.
    - ë©¤ë²„ ì°¸ì¡°ë¥¼ ìƒì„±í•  ë•Œ í´ë˜ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•¨ê»˜ ì €ì¥í•œ ë‹¤ìŒ ë‚˜ì¤‘ì— ê·¸ ì¸ìŠ¤í„´ìŠ¤ì— ëŒ€í•´ ë©¤ë²„ë¥¼ í˜¸ì¶œí•´ì¤€ë‹¤.
    - í˜¸ì¶œ ì‹œ ìˆ˜ì‹  ëŒ€ìƒ ê°ì²´ë¥¼ ë³„ë„ë¡œ ì§€ì •í•´ ì¤„ í•„ìš”ê°€ ì—†ë‹¤.
    
    ```kotlin
    val p = Person("Dmitry", 34)
    
    val personAgeFunction = Person::age
    println(personAgeFunction(p)) // 34
    // ë°”ìš´ë“œ ë©¤ë²„ ì°¸ì¡°
    val personAgeFunction = p::age
    println(personAgeFunction()) // 34
    ```
    

## 2. ì»¬ë ‰ì…˜ í•¨ìˆ˜í˜• API

---

### 2-1. í•„ìˆ˜ì ì¸ í•¨ìˆ˜: `filter`ì™€ `map`

---

- `filter` í•¨ìˆ˜ëŠ” ì»¬ë ‰ì…˜ì—ì„œ ì›ì¹˜ ì•ŠëŠ” ì›ì†Œë¥¼ ì œê±°í•œë‹¤. ì›ì†Œë¥¼ ë³€í™˜í•  ìˆ˜ëŠ” ì—†ë‹¤.
    
    ![Untitled](./image/5/Untitled%204.png)
    
    ```kotlin
    fun main() {
        val people = listOf(Person("Alice", 29), Person("Bob", 31))
        println(people.filter { it.age > 30 })
    }
    ```
    
- `map` í•¨ìˆ˜ëŠ” ì£¼ì–´ì§„ ëŒë‹¤ë¥¼ ì»¬ë ‰ì…˜ì˜ ê° ì›ì†Œì— ì ìš©í•œ ê²°ê³¼ë¥¼ ëª¨ì•„ì„œ ìƒˆ ì»¬ë ‰ì…˜ì„ ë§Œë“ ë‹¤.
    
    ![Untitled](./image/5/Untitled%205.png)
    
    ```kotlin
    fun main() {
        val people = listOf(Person("Alice", 29), Person("Bob", 31))
        println(people.map { it.name })
    }
    ```
    

â†’ ì´ëŸ° í•¨ìˆ˜ í˜¸ì¶œì„ ì‰½ê²Œ ì—°ì‡„ì‹œí‚¬ ìˆ˜ ìˆë‹¤.

- í•„í„°ì™€ ë³€í™˜ í•¨ìˆ˜ë¥¼ ë§µì— ì ìš©í•  ìˆ˜ë„ ìˆë‹¤.
    
    ```kotlin
    fun main() {
        val numbers = mapOf(0 to "zero", 1 to "one")
        println(numbers.mapValues { it.value.toUpperCase() })
    }
    ```
    
    - ë§µì˜ ê²½ìš° í‚¤ì™€ ê°’ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ê°€ ë”°ë¡œ ì¡´ì¬í•œë‹¤.
    - `filterKeys`ì™€ `mapKeys`ëŠ” í‚¤ë¥¼ ê±¸ëŸ¬ë‚´ê±°ë‚˜ ë³€í™˜í•˜ê³ , `filterValues`ì™€ `mapValues`ëŠ” ê°’ì„ ê±¸ëŸ¬ë‚´ê±°ë‚˜ ë³€í™˜í•œë‹¤.

### 2-2. `all`, `any`, `count`, `find`: ì»¬ë ‰ì…˜ì— ìˆ ì–´ ì ìš©

---

- ì»¬ë ‰ì…˜ì— ëŒ€í•´ ìì£¼ ìˆ˜í–‰í•˜ëŠ” ì—°ì‚°ìœ¼ë¡œ ì»¬ë ‰ì…˜ì˜ ëª¨ë“  ì›ì†Œê°€ ì–´ë–¤ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ íŒë‹¨í•˜ëŠ” ì—°ì‚°ì´ ìˆë‹¤.
    - `all`: ëª¨ë“  ì›ì†Œê°€ ì–´ë–¤ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ íŒë‹¨
        
        ```kotlin
        val canBeInClub27 = { p: Person -> p.age <= 27 }
        
        val people = listOf(Person("Kevin", 22), Person("Alice", 20), Person("Jenny", 33))
        println(people.all(canBeInClub27)) // false
        ```
        
    - `any`: ì–´ë–¤ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì›ì†Œê°€ ìˆëŠ”ì§€ íŒë‹¨
        
        ```kotlin
        println(people.any(canBeInClub27)) // true
        ```
        
    - `count`: ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì›ì†Œì˜ ê°œìˆ˜ ë°˜í™˜
        
        ```kotlin
        println(people.count(canBeInClub27)) // 2
        ```
        
    - `find`: ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì²« ë²ˆì§¸ ì›ì†Œ ë°˜í™˜ (`firstOrNull`ê³¼ ê°™ë‹¤)
        
        ```kotlin
        println(people.find(canBeInClub27)) // Person(name=Kevin, age=22)
        ```
        
        - ë§Œì¡±í•˜ëŠ” ì›ì†Œê°€ ì „í˜€ ì—†ëŠ” ê²½ìš° `null`ì„ ë°˜í™˜í•œë‹¤.

- ì–´ë–¤ ì¡°ê±´ì— ëŒ€í•´ `!all`ì„ ìˆ˜í–‰í•œ ê²°ê³¼ì™€ ê·¸ ì¡°ê±´ì˜ ë¶€ì •ì— ëŒ€í•´ `any`ë¥¼ ìˆ˜í–‰í•œ ê²°ê³¼ëŠ” ê°™ë‹¤ â†’ ë“œ ëª¨ë¥´ê°•ì˜ ë²•ì¹™
    - ê°€ë…ì„±ì„ ìœ„í•´ `any`ì™€ `all` ì•ì— `!`ë¥¼ ë¶™ì´ì§€ ì•ŠëŠ” ê²ƒì´ ë‚«ë‹¤.
- í•¨ìˆ˜ë¥¼ ì ì¬ì ì†Œì— ì‚¬ìš©í•˜ê¸°: `count`ì™€ `size` â†’ `count`ë¥¼ ì‚¬ìš©í•˜ë©´ ì›ì†Œì˜ ê°œìˆ˜ë§Œ ì¶”ì í•˜ê³ , ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì›ì†Œë¥¼ ë”°ë¡œ ì €ì¥í•˜ì§€ ì•Šì•„ì„œ ì´ ê²½ìš°ì—ëŠ” `count`ê°€ ë” íš¨ìœ¨ì ì´ë‹¤.
    
    ```kotlin
    people.filter(canBeInClub27).size
    ```
    
    - ì´ë ‡ê²Œ í•˜ë©´ `filter`ì˜ ê²°ê³¼ë¡œ ì¤‘ê°„ ì»¬ë ‰ì…˜ì´ ìƒê¸´ë‹¤.

### 2-3. `groupBy`: ë¦¬ìŠ¤íŠ¸ë¥¼ ì—¬ëŸ¬ ê·¸ë£¹ìœ¼ë¡œ ì´ë¤„ì§„ ë§µìœ¼ë¡œ ë³€ê²½

---

- `groupBy`: ì»¬ë ‰ì…˜ì˜ ëª¨ë“  ì›ì†Œë¥¼ ì–´ë–¤ íŠ¹ì„±ì— ë”°ë¼ ì—¬ëŸ¬ ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆ ì¤€ë‹¤.
    
    ```kotlin
    val people = listOf(Person("Alice", 20), Person("Jenny", 33), Person("Pi", 33))
    // ì›ì†Œë¥¼ êµ¬ë¶„í•˜ëŠ” íŠ¹ì„±ì´ í‚¤
    // í‚¤ ê°’ì— ë”°ë¥¸ ê° ê·¸ë£¹ì´ ê°’ ì¸ ë§µ
    println(people.groupBy { it.age }) // {20=[Person(name=Alice, age=20)], 33=[Person(name=Jenny, age=33), Person(name=Pi, age=33)]}
    // ë©¤ë²„ ì°¸ì¡° ë²„ì „
    println(people.groupBy(Person::age)) // {20=[Person(name=Alice, age=20)], 33=[Person(name=Jenny, age=33), Person(name=Pi, age=33)]}
    ```
    
    ![Untitled](./image/5/Untitled%206.png)
    

### 2-4. `flatMap`ê³¼ `flatten`: ì¤‘ì²©ëœ ì»¬ë ‰ì…˜ ì•ˆì˜ ì›ì†Œ ì²˜ë¦¬

---

- `flatMap`: ì£¼ì–´ì§„ ëŒë‹¤ë¥¼ ì»¬ë ‰ì…˜ì˜ ëª¨ë“  ê°ì²´ì— ì ìš©(`map`)í•˜ê³ , ì ìš©í•œ ê²°ê³¼ ì–»ì–´ì§€ëŠ” ì—¬ëŸ¬ ë¦¬ìŠ¤íŠ¸ë¥¼ í•œ ë¦¬ìŠ¤íŠ¸ì— ëª¨ì€ë‹¤(`flatten`).
    
    ```kotlin
    val strings = listOf("abc", "def")
    println(strings.flatMap { it.toList() }) // [a, b, c, d, e, f]
    ```
    
    ![Untitled](./image/5/Untitled%207.png)
    
- `flatten`: íŠ¹ë³„íˆ ë³€í™˜í•  ë‚´ìš©ì—†ì´ í¼ì¹˜ê¸°ë§Œ í•  ë•Œ ì‚¬ìš©
    - `list.flatten()`
- ì»¬ë ‰ì…˜ì„ ë‹¤ë£¨ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•  ê²½ìš°ì—ëŠ” ì›í•˜ëŠ” ë°”ë¥¼ ì–´ë–»ê²Œ ì¼ë°˜ì ì¸ ë³€í™˜ì„ ì‚¬ìš©í•´ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ì§€ ìƒê°í•´ë³´ê³  ê·¸ëŸ° ë³€í™˜ì„ ì œê³µí•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ê°€ ìˆëŠ”ì§€ ì‚´í´ë³´ë¼.****

## 3. ì§€ì—° ê³„ì‚°(`lazy`) ì»¬ë ‰ì…˜ ì—°ì‚°

---

- `map`ì´ë‚˜ `filter` ê°™ì€ ëª‡ ê°€ì§€ ì»¬ë ‰ì…˜ í•¨ìˆ˜ë¥¼ ì‚´í´ë´¤ë‹¤. ê·¸ëŸ° í•¨ìˆ˜ëŠ” ê²°ê³¼ ì»¬ë ‰ì…˜ì„ ì¦‰ì‹œ ìƒì„±í•œë‹¤.
    - ì»¬ë ‰ì…˜ í•¨ìˆ˜ë¥¼ ì—°ì‡„í•˜ë©´ ë§¤ ë‹¨ê³„ë§ˆë‹¤ ê³„ì‚° ì¤‘ê°„ ê²°ê³¼ë¥¼ ìƒˆë¡œìš´ ì»¬ë ‰ì…˜ì— ì„ì‹œë¡œ ë‹´ëŠ”ë‹¤ëŠ” ëœ»
        
        ```kotlin
        people.map(Person::name).filter { it.startsWith("A") }
        ```
        
- ì‹œí€€ìŠ¤(`sequence`)ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ê°„ ì„ì‹œ ì»¬ë ‰ì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³ ë„ ì»¬ë ‰ì…˜ ì—°ì‚°ì„ ì—°ì‡„í•  ìˆ˜ ìˆë‹¤.
    
    ```kotlin
    listOf(1, 2, 3, 4).asSequence() // ì›ë³¸ ì»¬ë ‰ì…˜ì„ì‹œí€€ìŠ¤ë¡œ ë³€í™˜í•œë‹¤. 
            .map { print("map($it) "); it * it } // ì‹œí€€ìŠ¤ë„ ì»¬ë ‰ì…˜ê³¼ ë˜‘ê°™ì€ API ë¥¼ ì œê³µí•œë‹¤. 
            .filter { print("filter($it) "); it % 2 == 0 }
            .toList() // ê²°ê³¼ ì‹œí€€ìŠ¤ë¥¼ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜í•œë‹¤.
    ```
    

- ì½”í‹€ë¦° ì§€ì—° ê³„ì‚° ì‹œí€€ìŠ¤ëŠ” `Sequence` ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì‹œì‘í•œë‹¤. `Sequence` ì•ˆì—ëŠ” `iterator`ë¼ëŠ” ë‹¨ í•˜ë‚˜ì˜ ë©”ì†Œë“œê°€ ìˆë‹¤. ê·¸ ë©”ì†Œë“œë¥¼ í†µí•´ ì‹œí€€ìŠ¤ë¡œë¶€í„° ì›ì†Œ ê°’ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
    - í° ì»¬ë ‰ì…˜ì— ëŒ€í•´ì„œ ì—°ì‚°ì„ ì—°ì‡„ì‹œí‚¬ ë•ŒëŠ” ì‹œí€€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê·œì¹™ìœ¼ë¡œ ì‚¼ì•„ë¼.
    - ì»¬ë ‰ì…˜ì— ë“¤ì–´ìˆëŠ” ì›ì†Œê°€ ë§ìœ¼ë©´ ì¤‘ê°„ ì›ì†Œë¥¼ ì¬ë°°ì—´í•˜ëŠ” ë¹„ìš©ì´ ì»¤ì§€ê¸° ë•Œë¬¸ì— ì§€ì—° ê³„ì‚°ì´ ë” ë‚«ë‹¤.

### 3-1. ì‹œí€€ìŠ¤ ì—°ì‚° ì‹¤í–‰: ì¤‘ê°„ ì—°ì‚°ê³¼ ìµœì¢… ì—°ì‚°

---

- ì¤‘ê°„ ì—°ì‚°: ë‹¤ë¥¸ ì‹œí€€ìŠ¤ë¥¼ ë°˜í™˜, í•­ìƒ ì§€ì—° ê³„ì‚°ëœë‹¤.
    - ê²°ê³¼ë¥¼ ì–»ì„ í•„ìš”ê°€ ìˆì„ ë•Œ(ì¦‰ ìµœì¢… ì—°ì‚°ì´ í˜¸ì¶œë  ë•Œ) ì ìš©ëœë‹¤.
- ìµœì¢… ì—°ì‚°: ê²°ê³¼ë¥¼ ë°˜í™˜ (ì»¬ë ‰ì…˜, ì›ì†Œ, ìˆ«ì ë˜ëŠ” ê°ì²´)
    
    ```kotlin
    listOf(1, 2, 3, 4).asSequence()
            .map { print("map($it) "); it * it }
            .filter { print("filter($it) "); it % 2 == 0 }
            .toList()
    // ê²°ê³¼
    >>> map(1) filter(1) map(2) filter(4) map(3) filter(9) map(4) filter(16)
    ```
    

![Untitled](./image/5/Untitled%208.png)

- ì‹œí€€ìŠ¤ì˜ ê²½ìš° ëª¨ë“  ì—°ì‚°ì€ ê° ì›ì†Œì— ëŒ€í•´ ìˆœì°¨ì ìœ¼ë¡œ ì ìš©ëœë‹¤.
- ì›ì†Œì— ì—°ì‚°ì„ ì°¨ë¡€ëŒ€ë¡œ ì ìš©í•˜ë‹¤ê°€ ê²°ê³¼ê°€ ì–»ì–´ì§€ë©´ ê·¸ ì´í›„ì˜ ì›ì†Œì— ëŒ€í•´ì„œëŠ” ë³€í™˜ì´ ì´ë¤„ì§€ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.
    
    ![Untitled](./image/5/Untitled%209.png)
    
- ì»¬ë ‰ì…˜ì— ëŒ€í•´ ìˆ˜í–‰í•˜ëŠ” ì—°ì‚°ì˜ ìˆœì„œë„ ì„±ëŠ¥ì— ì˜í–¥ì„ ë¼ì¹œë‹¤.
    
    ![Untitled](./image/5/Untitled%2010.png)
    
    - `filter`ë¥¼ ë¨¼ì € í•˜ë©´ ë¶€ì ì ˆí•œ ì›ì†Œë¥¼ ë¨¼ì € ì œì™¸í•˜ê¸° ë•Œë¬¸ì— ê·¸ëŸ° ì›ì†ŒëŠ” ë³€í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤.

- ìë°” ìŠ¤íŠ¸ë¦¼ê³¼ ì½”í‹€ë¦° ì‹œí€€ìŠ¤ ë¹„êµ
    - ìë°” 8ì„ ì±„íƒí•˜ë©´ í˜„ì¬ ì½”í‹€ë¦° ì»¬ë ‰ì…˜ê³¼ ì‹œí€€ìŠ¤ì—ì„œ ì œê³µí•˜ì§€ ì•ŠëŠ” ì¤‘ìš”í•œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.****
    - ìŠ¤íŠ¸ë¦¼ ì—°ì‚°(`map`ê³¼ `filter` ë“±)ì„ ì—¬ëŸ¬ CPU ì—ì„œ ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥

### 3-2. ì‹œí€€ìŠ¤ ë§Œë“¤ê¸°

---

- `generateSequence()`: ì´ì „ì˜ ì›ì†Œë¥¼ ì¸ìë¡œ ë°›ì•„ ë‹¤ìŒ ì›ì†Œë¥¼ ê³„ì‚°í•œë‹¤.
    
    ```kotlin
    >>> val naturalNumbers = generateSequence(0) { it + 1 }
    >>> val numbersTo100 = naturalNumbers.takeWhile { it <= 100 }
    >>> println(numbersTo100.sum()) //sumì˜ ê²°ê³¼ë¥¼ ê³„ì‚°í•  ë•Œ ëª¨ë“  ì§€ì—° ì—°ì‚°ì´ ìˆ˜í–‰ëœë‹¤.
    5050
    ```
    

## 4. ìë°” í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ í™œìš©

---

- í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤: ì¶”ìƒ ë©”ì„œë“œê°€ ë‹¨ í•˜ë‚˜ë§Œ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤
    - SAM (Single Abstract Method) ì¸í„°í˜ì´ìŠ¤: ë‹¨ì¼ ì¶”ìƒ ë©”ì†Œë“œ
    - ex> `Runnable`, `Callable`
        
        ```java
        @FunctionalInterface
        public interface Runnable {
            public abstract void run();
        }
        ```
        

### 4-1. ìë°” ë©”ì†Œë“œì— ëŒë‹¤ë¥¼ ì¸ìë¡œ ì „ë‹¬

---

- í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¸ìë¡œ ì›í•˜ëŠ” ìë°” ë©”ì†Œë“œì— ì½”í‹€ë¦° ëŒë‹¤ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.
    
    ```kotlin
    // java
    void postponeComputation(int delay, Runnable computation);
    ```
    

- ëŒë‹¤ì™€ ë¬´ëª… ê°ì²´ì˜ ì°¨ì´
    - ê°ì²´: ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” ê²½ìš°, ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ëœë‹¤.
        
        ```kotlin
        postponComputation(1000, object : Runnable { // ê°ì²´ ì‹ì„ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ìœ¼ë¡œ ë„˜ê¸´ë‹¤. 
        		override fun run() {	println(42) }
        })
        ```
        
    - ëŒë‹¤: ëŒë‹¤ì— ëŒ€ì‘í•˜ëŠ” ë¬´ëª… ê°ì²´ë¥¼ ë©”ì„œë“œ í˜¸ì¶œ ì‹œë§ˆë‹¤ ë°˜ë³µ ì‚¬ìš©í•œë‹¤.
        - ì»´íŒŒì¼ëŸ¬ëŠ” ìë™ìœ¼ë¡œ ë¬´ëª… í´ë˜ìŠ¤ì™€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
            
            ```kotlin
            postponComputation(1000) { println(42) } // í”„ë¡œê·¸ë¨ ì „ì²´ì—ì„œ Runnable ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ë‹¨ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì§„ë‹¤.
            ```
            

- ëŒë‹¤ê°€ ì£¼ë³€ ì˜ì—­ì˜ ë³€ìˆ˜ë¥¼ í¬íší•œë‹¤ë©´ ë§¤ í˜¸ì¶œë§ˆë‹¤ ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ê·¸ëŸ° ê²½ìš° ì»´íŒŒì¼ëŸ¬ëŠ” ë§¤ë²ˆ ì£¼ë³€ ì˜ì—­ì˜ ë³€ìˆ˜ë¥¼ í¬íší•œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì¤€ë‹¤.
    
    ```kotlin
    fun handlerComputation(id: String) { // ëŒë‹¤ ì•ˆì—ì„œ "id" ë³€ìˆ˜ë¥¼ í¬íší•œë‹¤.
    		postponeComputation(1000) { println(id) } // handlerComputationì„ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ ìƒˆë¡œ Runnable ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“ ë‹¤. 
    }
    ```
    

- ëŒë‹¤ì˜ ìì„¸í•œ êµ¬í˜„
    - ì½”í‹€ë¦° 1.0ì—ì„œ ì¸ë¼ì¸(`inline`) ë˜ì§€ ì•Šì€ ëª¨ë“  ëŒë‹¤ ì‹ì€ ë¬´ëª… í´ë˜ìŠ¤ë¡œ ì»´íŒŒì¼ëœë‹¤.
    - ì½”í‹€ë¦° 1.1ë¶€í„°ëŠ” ìë°” 8 ë°”ì´íŠ¸ì½”ë“œë¥¼ ìƒì„±í•  ìˆ˜ ìˆì§€ë§Œ ì—¬ì „íˆ ì½”í‹€ë¦° 1.0ì²˜ëŸ¼ ëŒë‹¤ë§ˆë‹¤ ë³„ë„ì˜ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤.
        - í•˜ì§€ë§Œ í–¥í›„ ë³„ë„ì˜ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì§€ ì•Šê³  ìë°” 8ë¶€í„° ë„ì…ëœ ëŒë‹¤ ê¸°ëŠ¥ì„ í™œìš©í•œ ë°”ì´íŠ¸ì½”ë“œë¥¼ ë§Œë“¤ì–´ë‚¼ ê³„íšì´ë‹¤.
            - ëŒë‹¤ê°€ ë³€ìˆ˜ë¥¼ í¬íší•˜ë©´ ë¬´ëª… í´ë˜ìŠ¤ ì•ˆì— í¬íší•œ ë³€ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” í•„ë“œê°€ ìƒê¸°ë©°, ë§¤ í˜¸ì¶œë§ˆë‹¤ ê·¸ ë¬´ëª… í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒˆë¡œ ë§Œë“ ë‹¤.
            - í•˜ì§€ë§Œ í¬íší•˜ëŠ” ë³€ìˆ˜ê°€ ì—†ëŠ” ëŒë‹¤ì— ëŒ€í•´ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹¨ í•˜ë‚˜ë§Œ ìƒê¸´ë‹¤. ëŒë‹¤ì‹ì˜ ë°”ì´íŠ¸ì½”ë“œë¥¼ ë””ì»´íŒŒì¼(decompile)í•˜ë©´ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.
- ì½”í‹€ë¦° `inline`ìœ¼ë¡œ í‘œì‹œëœ ì½”í‹€ë¦° í•¨ìˆ˜ì—ê²Œ ëŒë‹¤ë¥¼ ë„˜ê¸°ë©´ ì•„ë¬´ëŸ° ë¬´ëª… í´ë˜ìŠ¤ë„ ë§Œë“¤ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤.
    - ëŒ€ë¶€ë¶„ì˜ ì½”í‹€ë¦° í™•ì¥ í•¨ìˆ˜ë“¤ì€ `inline` í‘œì‹œê°€ ë¶™ì–´ìˆë‹¤.
    - 8.2ì ˆì—ì„œ ì„¤ëª…í•œë‹¤.

### 4-2. SAM ìƒì„±ì: ëŒë‹¤ë¥¼ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ë¡œ ëª…ì‹œì ìœ¼ë¡œ ë³€ê²½

---

- SAM ìƒì„±ì: ëŒë‹¤ë¥¼ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë³€í™˜í•  ìˆ˜ ìˆê²Œ ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ìƒì„±í•œ í•¨ìˆ˜ë‹¤.
    - ì»´íŒŒì¼ëŸ¬ê°€ ìë™ìœ¼ë¡œ ëŒë‹¤ë¥¼ í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤ ë¬´ëª… í´ë˜ìŠ¤ë¡œ ë°”ê¾¸ì§€ ëª»í•˜ëŠ” ê²½ìš° SAM ìƒì„±ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
        
        ```kotlin
        fun createAllDoneRunnable(): Runnable {
            return Runnable { println("All done!") }
        }
        >>> createAllDoneRunnable().run()
        All done!
        ```
        
        ```kotlin
        val listener = OnClickListener { view ->
            val text = when (view.id) { // ì–´ë–¤ ë²„íŠ¼ì´ í´ë¦­ëëŠ”ì§€ íŒë‹¨í•œë‹¤.
                R.id.button1 -> "First button"
                R.id.button2 -> "Second button"
                else -> "Unknown button"
            }
            toast(text)
        }
        >>> button1.setOnClickListener(listener)
        >>> button2.setOnClickListener(listener)
        ```
        

- ëŒë‹¤ì™€ ë¦¬ìŠ¤ë„ˆ ë“±ë¡/í•´ì œí•˜ê¸°
    - ëŒë‹¤ì—ëŠ” ë¬´ëª… ê°ì²´ì™€ ë‹¬ë¦¬ ì¸ìŠ¤í„´ìŠ¤ ìì‹ ì„ ê°€ë¦¬í‚¤ëŠ” `this`ê°€ ì—†ë‹¤.
    - ì»´íŒŒì¼ëŸ¬ ì…ì¥ì—ì„œ ëŒë‹¤ëŠ” ì½”ë“œ ë¸”ëŸ­ì¼ ë¿ì´ê³ , ê°ì²´ê°€ ì•„ë‹ˆë¯€ë¡œ ê°ì²´ì²˜ëŸ¼ ëŒë‹¤ë¥¼ ì°¸ì¡°í•  ìˆ˜ëŠ” ì—†ë‹¤. ëŒë‹¤ ì•ˆì—ì„œ `this`ëŠ” ê·¸ ëŒë‹¤ë¥¼ ë‘˜ëŸ¬ì‹¼ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°€ë¦¬í‚¨ë‹¤.
    - ë¬´ëª… ê°ì²´ ì•ˆì—ì„œëŠ” `this`ê°€ ê·¸ ë¬´ëª… ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ ìì‹ ì„ ê°€ë¦¬í‚¨ë‹¤.

## 5. ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤: `with`ì™€ `apply`

---

- ìë°”ì˜ ëŒë‹¤ì—ëŠ” ì—†ëŠ” ì½”í‹€ë¦° ëŒë‹¤ì˜ ë…íŠ¹í•œ ê¸°ëŠ¥ì´ ìˆë‹¤.****
    - ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤: ìˆ˜ì‹  ê°ì²´ë¥¼ ëª…ì‹œí•˜ì§€ ì•Šê³  ëŒë‹¤ì˜ ë³¸ë¬¸ ì•ˆì—ì„œ ë‹¤ë¥¸ ê°ì²´ì˜ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•  ìˆ˜ ìˆê²Œ í•˜ëŠ” ê²ƒ

### 5-1. `with` í•¨ìˆ˜

---

```kotlin
fun alphabet(): String {
    val result = StringBuilder()
    for (letter in 'A'..'Z') {
         result.append(letter)
    }
    result.append("\\nNow I know the alphabet!")
    return result.toString()
}
```

- ì–´ë–¤ ê°ì²´ì˜ ì´ë¦„ì„ ë°˜ë³µí•˜ì§€ ì•Šê³ ë„ ê·¸ ê°ì²´ì— ëŒ€í•´ ë‹¤ì–‘í•œ ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤ë©´ ì¢‹ì„ ê²ƒì´ë‹¤.
    - ë‹¤ì–‘í•œ ì–¸ì–´ê°€ ê·¸ëŸ° ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
    
    ```kotlin
    fun alphabet(): String {
        val stringBuilder = StringBuilder()
        return with(stringBuilder) { // ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë ¤ëŠ” ìˆ˜ì‹  ê°ì²´ë¥¼ ì§€ì •í•œë‹¤.
            for (letter in 'A'..'Z') {
                this.append(letter)
            }
            append("\\nNow I know the alphabet!")
            this.toString()
        }
    }
    ```
    
- `with` í•¨ìˆ˜ëŠ” ì²« ë²ˆì§¸ ì¸ìë¡œ ë°›ì€ ê°ì²´ë¥¼ ë‘ ë²ˆì§¸ ì¸ìë¡œ ë°›ì€ ëŒë‹¤ì˜ ìˆ˜ì‹  ê°ì²´ë¡œ ë§Œë“ ë‹¤.
    - ì¸ìë¡œ ë°›ì€ ëŒë‹¤ ë³¸ë¬¸ì—ì„œëŠ” `this`ë¥¼ ì‚¬ìš©í•´ ê·¸ ìˆ˜ì‹  ê°ì²´ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
    - `this`ì™€ ì (`.`)ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  í”„ë¡œí¼í‹°ë‚˜ ë©”ì†Œë“œ ì´ë¦„ë§Œ ì‚¬ìš©í•´ë„ ìˆ˜ì‹  ê°ì²´ì˜ ë©¤ë²„ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
        
        ```kotlin
        fun alphabet() = with(StringBuilder()) {
            for (letter in 'A'..'Z') {
                append(letter)
            }
            append("\nNow I know the alphabet!")
            toString()
        }
        ```
        
- `with`ê°€ ë°˜í™˜í•˜ëŠ” ê°’ì€ ëŒë‹¤ ì½”ë“œë¥¼ ì‹¤í–‰í•œ ê²°ê³¼ë©°, ê·¸ ê²°ê³¼ëŠ” ëŒë‹¤ ì‹ì˜ ë³¸ë¬¸ì— ìˆëŠ” ë§ˆì§€ë§‰ ì‹ì˜ ê°’ì´ë‹¤.

- ëŒë‹¤ì˜ ê²°ê³¼ ëŒ€ì‹  ìˆ˜ì‹  ê°ì²´ê°€ í•„ìš”í•œ ê²½ìš° â†’ `apply` ë¼ì´ë¸ŒëŸ¬ë¦¬ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

### 5-2. `apply` í•¨ìˆ˜

---

- `apply`ëŠ” í•­ìƒ ìì‹ ì—ê²Œ ì „ë‹¬ëœ ê°ì²´(ì¦‰ ìˆ˜ì‹  ê°ì²´)ë¥¼ ë°˜í™˜í•œë‹¤.
    
    ```kotlin
    fun alphabet() = StringBuilder().apply {
        for (letter in 'A'..'Z') {
            append(letter)
        }
        append("\\nNow I know the alphabet!")
    }.toString()
    ```
    
- ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ë©´ì„œ ì¦‰ì‹œ í”„ë¡œí¼í‹° ì¤‘ ì¼ë¶€ë¥¼ ì´ˆê¸°í™”í•´ì•¼ í•˜ëŠ” ê²½ìš° ìœ ìš©í•˜ë‹¤.
    
    ```kotlin
    fun createViewWithCustomAttributes(context: Context) =
        TextView(context).apply {
            text = "Sample Text"
            textSize = 20.0
            setPadding(10, 0, 0, 0)
        }
    ```
    

<aside>
ğŸ’¡ ìˆ˜ì‹  ê°ì²´ ì§€ì • ëŒë‹¤ëŠ” DSL ì„ ë§Œë“¤ ë•Œ ë§¤ìš° ìœ ìš©í•œ ë„êµ¬ë‹¤.

</aside>

- ì°¸ê³ 
    - [https://incheol-jung.gitbook.io/docs/study/kotlin-in-action/5](https://incheol-jung.gitbook.io/docs/study/kotlin-in-action/5)
    - [https://essie-cho.com/kotlin-in-action-05/](https://essie-cho.com/kotlin-in-action-05/)
