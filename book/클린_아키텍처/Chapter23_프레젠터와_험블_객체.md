# Chapter 23. 프레젠터와 험블 객체

## 험블 객체 패턴

---

- 험블 객체 패턴: 디자인 패턴으로, 테스트하기 어려운 행위와 테스트하기 쉬운 행위를 단위 테스트 작성자가 분리하기 쉽게 하는 방법으로 고안되었다.
    - 행위들을 두 개의 모듈 또는 클래스로 나눈다.
    - 이들 모듈 중 하나가 험블이다. 가장 기본적인 본질은 남기고, 테스트하기 어려운 행위를 모두 험블 객체로 옮긴다.
    - 나머지 모듈에는 험블 객체에 속하지 않은, 테스트하기 쉬운 행위를 모두 옮긴다.

## 프레젠터와 뷰

---

- 뷰: 험블 객체이고 테스트하기 어렵다.
    - 이 객체에 포함된 코드는 가능한 한 간단하게 유지한다.
    - 뷰는 데이터를 GUI로 이동시키지만, 데이터를 직접 처리하지는 않는다.
- 프레젠터: 테스트하기 쉬운 객체다.
    - 애플리케이션으로부터 데이터를 받아 화면에 표현할 수 있는 포맷으로 만드는 것이다.

## 테스트와 아키텍처

---

- 테스트 용이성은 좋은 아키텍처가 지녀야 할 속성

## 데이터베이스 게이트웨이

---

- 데이터베이스 게이트웨이: 유스케이스 인터랙터와 데이터베이스 사이에 위치한다.
    - 다형적 인터페이스로, 애플리케이션이 데이터베이스에 수행하는 생성, 조회, 갱신, 삭제 작업과 관련된 모든 메서드를 포함한다.
- 인터페이스의 구현체는 데이터베이스 계층에 위치한다. 이 구현체는 험블 객체다.
    - 구현체에서 직접 SQL을 사용하거나 데이터베이스에 대한 임의의 인터페이스를 통해 게이트웨이의 메서드에서 필요한 데이터에 접근하다.

## 데이터 매퍼

---

- 객체 관계 매퍼(Object Relational Mapper) 같은 건 사실 존재하지 않는다.
    - 객체는 데이터 구조가 아니기 때문이다.
        - 데이터는 모두 `private`으로 선언되므로 객체의 사용자는 데이터를 볼 수 없다.
            - 사용자는 객체에서 `public` 메서드만 볼 수 있다.
    - 사용자 관점에서 볼 때 객체는 단순히 오퍼레이션의 집합이다.
- ORM보다는 차라리 ‘데이터 매퍼’라고 부르는 편이 나아 보이는데, 관계형 데이터베이스 테이블로부터 가져온 데이터를 데이터 구조에 맞게 담아주기 때문이다.

## 서비스 리스너

---

- 외부로부터 데이터를 수신하는 서비스의 경우, 서비스 리스너가 서비스 인터페이스로부터 데이터를 수신하고, 데이터를 애플리케이션에서 사용할 수 있게 간단한 데이터 구조로 포맷을 변경한다. 그런 후 이 데이터 구조는 서비스 경계를 가로질러서 내부로 전달된다.

## 결론

---

- 험블 객체 패턴을 사용하면 전체 시스템의 테스트 용이성을 크게 높일 수 있다.