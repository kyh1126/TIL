# Chapter 30. 데이터베이스는 세부사항이다

- 아키텍처 관점에서 볼 때 데이터베이스는 엔티티가 아니다.
    - 데이터베이스는 세부사항이라서 아키텍처의 구성요소 수준으로 끌어올릴 수 없다.

## 관계형 데이터베이스

---

- 관계형 데이터베이스의 기술이 얼마나 뛰어나든, 유용하든, 아니면 수학적으로 견고하든, 결국은 그저 기술일 뿐이다.
    - 관계형 데이터베이스가 세부사항임을 뜻한다.

## 데이터베이스 시스템은 왜 이렇게 널리 사용되는가?

---

- 디스크 때문에 피해갈 수 없는 시간 지연이라는 짐을 완화하기 위해, 색인, 캐시, 쿼리 계획 최적화가 필요해졌다.
- 데이터를 표현하는 일종의 표준적인 방식도 필요했다.

→ 데이터 접근 및 관리 시스템이 필요했다.

- 시간이 지나면서 이러한 시스템은 뚜렷이 구분되는 두 가지 유형으로 분리되었다.
    - 파일 시스템
        - 문서(document) 기반
        - 문서를 이름을 기준으로 저장하거나 조회할 때는 잘 동작하지만, 내용을 기준으로 검색할 때는 그리 크게 도움되지 않는다.
    - 관계형 데이터베이스 관리 시스템(RDBMS)
        - 내용 기반
        - 데이터베이스 시스템은 내용을 기반으로 레코드를 자연스럽고 편리하게 찾는 방법을 제공한다.
        - 하지만 안타깝게도 정형화되지 않은 문서를 저장하고 검색하는 데는 대체로 부적합하다.
    
    → 각 시스템은 데이터를 색인하고 배치하는 고유한 전략을 활용한다. 데이터를 빠르게 조작할 수 있도록 결국에는 관련 있는 데이터를 RAM으로 가져온다.
    

## 디스크가 없다면 어떻게 될까?

---

- 한때는 디스크가 성행했지만, 이제는 소멸 중인 부품이다.
    - RAM으로 대체되고 있다.
- 이 데이터들을 연결 리스트, 트리, 해시 테이블, 스택, 큐 혹은 여타 무수히 많은 데이터 구조로 체계화할 것이며, 데이터에 접근할 때는 포인터나 참조를 사용할 것이다.

## 세부사항

---

- 데이터베이스는 비트를 담는 거대한 그릇이며, 데이터를 장기적으로 저장하는 공간에 지나지 않는다.

## 하지만 성능은?

---

- 데이터 저장소의 측면에서 성능은 완전히 캡슐화하여 업무 규칙과는 분리할 수 있는 관심사다.

## 개인적인 일화

---

- 1980년대 후반에 로버트C마틴은 스타트업에서 소프트웨어 엔지니어 팀을 이끌었다.
- 간단한 랜덤 액세스 파일 시스템만으로도 차고 넘치는 상황에서, 도대체 왜 내가 거대한 RDBMS를 도입하는 데 따르는 성능 오버헤드와 경비를 모두 감당해야 하지?
    - 결사적으로 그와 싸웠다.
- 이 회사에는 RDBMS를 쉬지 않고 외치던 하드웨어 엔지니어가 있었다.
    - 그는 나 모르게 뒤에서 회사 경영진과 회의를 잡았다.
    - 그와 싸웠다. 마케팅 담당자와도 싸웠다.
    - 믿을 수 없는 무지에 맞서서 나의 공학적 원칙을 고수했다. 싸우고, 싸우고, 또 싸웠다.
- 합리성은 전혀 고려되지 않았다.
    - 비합리적이며 대외적일 뿐인, 그리고 근거가 아예 없이 그저 필요하다는 인식 때문이었지만, 현실 세계는 이런 것이었다.

- 옛날 이 시절로 돌아간다면 내가 어떻게 행동하는 게 옳았을까?
    - 시스템의 중심부에는 랜덤 액세스 파일을 그대로 유지하면 좋았을 것이다.
    - 실제로는 어떻게 했을까?
        - 회사를 관두고 컨설턴트가 되었다.

## 결론

---

- 체계화된 데이터 구조와 데이터 모델은 아키텍처적으로 중요하다. 반면, 기술과 시스템은 아키텍처적으로 중요치 않다.
- 데이터는 중요하다.
- 데이터베이스는 세부사항이다.