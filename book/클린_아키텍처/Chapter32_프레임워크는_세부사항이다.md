# Chapter 32. 프레임워크는 세부사항이다

- 프레임워크는 아키텍처가 될 수 없다.

## 프레임워크 제작자

---

- 대다수의 프레임워크 제작자는 커뮤니티에 도움이 되기를 바라는 마음에 자신의 작업물을 무료로 제공한다.
- 프레임워크 제작자는 자신이 해결해야 할 고유한 문제나 자신의 동료와 친구들의 문제를 알고 있다.
    - 그러한 문제들을 해결하기 위해 프레임워크를 만든다.
    - 당신의 문제를 해결하기 위해서가 아니다.

## 혼인 관계의 비대칭성

---

- 당신과 프레임워크 제작자 사이의 관계는 놀라울 정도로 비대칭적이다. 당신은 프레임워크를 위해 대단히 큰 헌신을 해야 하지만, 프레임워크 제작자는 당신을 위해 아무런 헌신도 하지 않는다.
    - 프레임워크를 사용해야 할 경우 우리는 프레임워크 제작자가 제공하는 문서를 꼼꼼히 읽는다.
    - 프레임워크와 절대로 분리할 수 없는 방식으로 쓰는 사용자가 많아지는 일은 자신의 프레임워크가 효과적임을 검증하는 최고의 방법이다.
- 사실상 프레임워크 제작자는 당신에게 프레임워크와 혼인하기를 요구하는 것이다.
    - 모든 위험과 부담은 오롯이 당신이 감수할 뿐, 제작자가 감수하는 건 아무것도 없다.

## 위험 요인

---

- 프레임워크의 아키텍처는 그다지 깔끔하지 않은 경우가 많다.
    - 의존성 규칙을 위반하는 경향
- 제품이 성숙해지면서 프레임워크가 제공하는 기능과 틀을 벗어나게 될 것이다.
- 프레임워크는 당신에게 도움되지 않는 방향으로 진화할 수도 있다.
    - 신규 버전으로 업그레이드하느라 다른 일을 못할 수도 있다.
- 새롭고 더 나은 프레임워크가 등장해서 갈아타고 싶을 수도 있다.

## 해결책

---

- 프레임워크와 결혼하지 말라!
    - 프레임워크가 아키텍처의 안쪽 원으로 들어오지 못하게 하라.
    - 프락시(proxy)를 만들고, 업무 규칙에 플러그인할 수 있는 컴포넌트에 이들 프락시를 위치시켜라.
- 프레임워크가 핵심 코드 안으로 들어오지 못하게 하라.
    - 대신 핵심 코드에 플러그인할 수 있는 컴포넌트에 프레임워크를 통합하고, 의존성 규칙을 준수하라.
        - ex> 스프링은 훌륭한 의존성 주입 프레임워크다. `@autowired` 어노테이션이 업무 객체 도처에 산재해서는 안 된다.
    - 업무 객체보다는 메인(Main) 컴포넌트에서 스프링을 사용해서 의존성을 주입하는 편이 낫다. 메인은 아키텍처 내에서 가장 지저분한, 최저 수준의 컴포넌트이기 때문에 스프링을 알아도 상관 없다.

## 이제 선언합니다

---

- 정말로 결혼해야만 하는 프레임워크도 존재한다.
    - ex> C++를 사용하고 있다면 STL과 결혼해야 할 가능성이 높다 → 이 관계는 피하기 힘들다.
    - ex> 자바를 사용한다면 표준 라이브러리와 반드시 결혼해야 한다.

- 이러한 관계는 정상이다. 하지만 선택적이어야 한다.
    - 애플리케이션이 프레임워크와 결혼하고자 한다면 애플리케이션의 남은 생애 동안 그 프레임워크와 항상 함께 해야 한다는 사실을 반드시 명심해야 한다.
    - 결코 가볍게 시작할 수 있는 관계가 아니다.

## 결론

---

- 가급적이면 프레임워크를 가능한 한 오랫동안 아키텍처 경계 너머에 두자.