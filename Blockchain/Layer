# Layer

## Layer1

---

- [https://www.youtube.com/watch?v=mXDBg-S5M0c](https://www.youtube.com/watch?v=mXDBg-S5M0c)
- 레이어 1(Layer 1)은 블록체인 기술에서 **기본이 되는 메인 블록체인 네트워크**를 지칭합니다. 비트코인, 이더리움과 같은 블록체인이 이에 해당하며, 이들은 자체적인 합의 메커니즘과 프로토콜을 통해 독립적으로 운영됩니다.
- 이러한 레이어 1 블록체인은 보안성과 탈중앙화를 제공하지만, 거래 처리 속도와 확장성 측면에서 한계를 가질 수 있습니다. 이를 개선하기 위해 레이어 2(Layer 2) 솔루션이 개발되었으며, 이는 레이어 1 위에서 작동하며 거래 처리 속도를 높이고 수수료를 낮추는 역할을 합니다.

## Layer2

---

- [https://medium.com/dsrv/누구보다-빠르게-남들과는-다르게-레이어2-솔루션-632981a07a83](https://medium.com/dsrv/%EB%88%84%EA%B5%AC%EB%B3%B4%EB%8B%A4-%EB%B9%A0%EB%A5%B4%EA%B2%8C-%EB%82%A8%EB%93%A4%EA%B3%BC%EB%8A%94-%EB%8B%A4%EB%A5%B4%EA%B2%8C-%EB%A0%88%EC%9D%B4%EC%96%B42-%EC%86%94%EB%A3%A8%EC%85%98-632981a07a83)
- **블록체인의 확장성 문제**
    - 블록체인 기술은 탈중앙화와 보안성 측면에서 혁신적이지만, **확장성 문제**로 인해 대량의 거래를 신속하게 처리하는 데 어려움을 겪고 있습니다. 이러한 한계를 극복하기 위해 다양한 **레이어 2 솔루션**이 개발되었습니다. 이 솔루션들은 메인 블록체인(레이어 1)의 보안을 유지하면서도 거래 처리 속도를 높이고 수수료를 낮추는 것을 목표로 합니다.
- **레이어 2 솔루션이 뭔가요?**
    - **레이어 2 솔루션**은 메인 블록체인의 기능을 확장하기 위해 그 위에 구축된 보조 프로토콜입니다. 이들은 거래를 오프체인에서 처리한 후 결과만을 메인체인에 기록함으로써, 전체적인 네트워크 효율성을 향상시킵니다. 대표적인 레이어 2 솔루션으로는 **상태 채널(State Channel)**, **플라즈마(Plasma)**, **롤업(Roll-up)**, **밸리디움(Validium)** 등이 있습니다.
- **상태 채널(State Channel)**
    - 상태 채널(State Channel)은 블록체인의 확장성 문제를 해결하기 위한 **레이어 2 솔루션** 중 하나로, 두 거래 당사자 간에 생성된 채널을 통해 **즉각적이고 저렴한 거래**를 가능하게 합니다.
    - **작동 방식**
        1. **채널 생성 및 자금 예치:** 두 참여자는 스마트 컨트랙트를 통해 다중서명(MultiSig) 계정을 생성하고, 각자 일정 금액을 예치하여 채널을 엽니다.
        2. **오프체인 거래:** 채널이 열린 상태에서 참여자들은 오프체인으로 직접 서명된 메시지를 교환하며 거래를 수행합니다. 이러한 거래는 블록체인에 기록되지 않으므로 **빠르고 비용 효율적**입니다.
        3. **채널 종료 및 정산:** 거래를 마친 후, 참여자들은 최신 상태를 블록체인에 제출하여 채널을 닫고, 예치된 자금을 최종 잔액에 따라 분배받습니다.
    - **장점**
        - **빠른 거래 처리:** 오프체인에서 직접 거래하므로 지연이 거의 없습니다.
        - **낮은 수수료:** 채널 개설과 종료 시에만 온체인 거래가 발생하므로, 중간 거래에 대한 수수료가 없습니다.
    - **단점**
        - **참여자의 지속적인 온라인 상태 필요:** 모든 상태 변화에 대한 당사자의 서명이 필요하므로, 참여자들은 거래 기간 동안 계속 온라인 상태를 유지해야 합니다.
        - **제한된 적용 범위:** 채널이 연결된 참여자 간의 거래에만 적용되며, 다른 사용자와의 거래에는 사용할 수 없습니다.
        - **스마트 컨트랙트 사용 제한:** 상태 채널 내에서 복잡한 스마트 컨트랙트의 구현이 제한적일 수 있습니다.
- **플라즈마(Plasma)**
    - 플라즈마는 '커밋 체인(commit chain)'이라는 정식 명칭을 가진 L2 솔루션의 이더리움 구현체의 이름이지만, 플라즈마라는 용어가 더욱 널리 알려져 해당 방식을 대표하는 용어로 사용되고 있습니다.
    - **작동 방식**
        - 플라즈마는 메인 블록체인(레이어 1) 외부에 플라즈마 체인(레이어 2)을 생성하여 다수의 트랜잭션을 처리한 후, 그 결과를 메인체인에 배포된 스마트 컨트랙트에 머클 트리(Merkle Tree)의 루트 해시 형태로 업데이트합니다.
        - 이러한 계층적 트리 구조를 통해 자식 체인인 플라즈마 체인의 정보가 부모 체인인 L1에 담기며, 이론적으로는 체인을 무한히 확장하여 트랜잭션을 처리할 수 있습니다.
    - **머클 트리(Merkle Tree)란?**
        - 머클 트리는 데이터를 나무 형태로 저장하는 자료구조로, 각 노드는 하위 노드들의 해시 값을 포함합니다. 이를 통해 최상위 노드인 루트 해시만으로 전체 데이터의 무결성을 검증할 수 있으며, 데이터의 위변조를 쉽게 감지할 수 있습니다.
    - **운영자(Operator)의 역할**
        - 각 플라즈마 체인에는 운영자(Operator)가 존재하며, 이들은 트랜잭션을 실행하고, 그 결과인 스테이트 루트를 메인체인에 제출합니다. 또한, 트랜잭션 데이터는 오프체인인 플라즈마 체인에 저장됩니다. 이러한 방식은 메인체인의 저장 공간을 절약하고, 상대적으로 저렴한 수수료로 트랜잭션을 처리할 수 있게 합니다.
    - **플라즈마 체인 사용 절차**
        1. **자금 예치:** 사용자는 메인체인에 배포된 플라즈마 스마트 컨트랙트에 자금을 예치하여 플라즈마 체인으로 입금합니다.
        2. **트랜잭션 수행:** 플라즈마 체인에서 오프체인으로 다수의 트랜잭션을 수행합니다.
        3. **자금 출금:** 플라즈마 체인을 더 이상 사용하지 않거나 운영자를 신뢰할 수 없을 경우, 사용자는 '탈출(Exit)' 과정을 통해 자금을 메인체인으로 출금합니다.
    - **사기 증명(Fraud Proof)과 데이터 가용성(Data Availability) 문제**
        - 탈출 과정에서 사용자는 출금 요청의 유효성을 검증받아야 하며, 부정한 출금 시도에 대해서는 다른 사용자가 이의를 제기할 수 있습니다. 그러나 플라즈마 방식에서는 데이터가 오프체인에 저장되므로, 운영자가 필요한 데이터를 제공하지 않을 경우 **데이터 가용성 문제**가 발생할 수 있습니다. 이로 인해 사용자는 운영자의 행위를 지속적으로 감시해야 하며, 대규모 출금 요청이 동시에 발생하면 메인체인의 혼잡을 초래할 수 있습니다.
    - **한계점과 롤업(Roll-up)으로의 전환**
        - 플라즈마는 높은 확장성을 제공하지만, 앞서 언급한 데이터 가용성 문제 등으로 인해 롤업(Roll-up)과 같은 새로운 확장성 솔루션에 대한 관심이 높아지고 있습니다.
- **롤업(Roll-up)**
    - 롤업(Roll-up)은 블록체인의 확장성을 향상시키기 위한 **레이어 2(Layer 2) 솔루션**으로, 다수의 트랜잭션을 오프체인에서 실행한 후, 그 결과를 요약하여 메인 블록체인(레이어 1)에 기록하는 방식입니다. 이를 통해 블록체인의 저장 공간을 절약하고, 트랜잭션 처리량을 증가시킬 수 있습니다.
    - **작동 방식**
        1. **트랜잭션 실행:** 사용자들은 롤업 체인(L2)에서 트랜잭션을 수행하며, 이 과정은 오프체인에서 이루어집니다.
        2. **데이터 요약 및 전송:** 실행된 트랜잭션의 요약본과 변경된 상태를 묶어 '배치(batch)' 형태로 메인체인(L1)에 제출합니다.
        3. **상태 업데이트:** 메인체인에 배포된 롤업 스마트 컨트랙트는 제출된 배치를 검증하고, 롤업 체인의 상태를 업데이트합니다.
    - **데이터 가용성 문제 해결**
        - 플라즈마와 달리, 롤업은 트랜잭션 데이터를 요약하여 메인체인에 저장함으로써 데이터 가용성 문제를 해결합니다. 이를 통해 누구나 온체인 데이터를 활용하여 트랜잭션의 유효성을 검증할 수 있습니다.
    - **롤업의 종류**
        1. **옵티미스틱 롤업(Optimistic Rollup):** 트랜잭션이 유효하다고 가정하고 처리하며, 이의가 제기되면 사기 증명을 통해 검증합니다. 일반적인 상황에서는 빠른 처리 속도를 제공하지만, 이의 제기 시 검증 시간이 소요될 수 있습니다.
        2. **ZK 롤업(Zero-Knowledge Rollup):** 영지식 증명을 사용하여 트랜잭션의 유효성을 즉시 검증합니다. 검증 시간이 짧고 예치금이 필요하지 않지만, 복잡한 계산 과정이 요구됩니다.
- **밸리디움(Validium)**
    - 밸리디움(Validium)은 이더리움의 확장성을 높이기 위한 **레이어 2(Layer 2) 솔루션**으로, 영지식 증명(ZKP)을 활용하여 오프체인에서 거래를 처리하면서도 그 유효성을 보장합니다. 이는 ZK 롤업과 유사하지만, **트랜잭션 데이터를 온체인에 저장하지 않는다는 차이점**이 있습니다.
    - **작동 방식**
        1. **거래 처리:** 사용자가 밸리디움을 통해 거래를 요청하면, 운영자는 이를 오프체인에서 일괄 처리한 후, 영지식 증명을 생성하여 해당 거래가 올바르게 수행되었음을 증명합니다.
        2. **상태 커밋먼트:** 밸리디움의 전체 상태는 머클 트리(Merkle Tree) 구조로 관리되며, 그 루트인 상태 루트(state root)는 이더리움 메인넷에 저장됩니다. 거래가 처리될 때마다 상태 루트는 업데이트되며, 새로운 상태 루트와 해당 거래의 유효성을 증명하는 증명이 이더리움 메인넷에 제출됩니다.
        3. **예치와 인출:** 사용자는 이더리움의 특정 스마트 컨트랙트를 통해 밸리디움에 자금을 예치할 수 있으며, 인출 시에는 운영자에게 요청을 제출하여 오프체인에서 처리된 후, 이더리움 메인넷에서 검증됩니다.
    - **장점**
        - **높은 확장성:** 트랜잭션 데이터를 오프체인에 저장함으로써, 초당 최대 9,000건의 거래(TPS)를 처리할 수 있습니다.
        - **비용 절감:** 온체인 데이터 저장이 필요 없으므로, 가스 요금을 크게 줄일 수 있습니다.
        - **보안 강화:** 영지식 증명을 통해 거래의 무결성을 보장하며, 오프체인 데이터 저장으로 프라이버시를 강화할 수 있습니다.
    - **단점**
        - **데이터 가용성 위험:** 트랜잭션 데이터가 오프체인에 저장되므로, 운영자가 데이터를 제공하지 않을 경우 사용자는 자금 인출에 어려움을 겪을 수 있습니다.
        - **중앙화 우려:** 데이터 가용성을 보장하기 위해 데이터 가용성 위원회(DAC)와 같은 중앙화된 조직에 의존하게 되며, 이는 탈중앙화의 원칙과 상충될 수 있습니다.

## 이더리움 Layer2

---

- [https://xangle.io/insight/research/61b1cd9b0cb08e8063cd6896](https://xangle.io/insight/research/61b1cd9b0cb08e8063cd6896)
- **레이어 2 솔루션이란?** → ZK롤업이 가장 유망하다.
    - 레이어 2 솔루션은 이더리움 메인넷의 확장성 문제(TPS 15)를 해결하기 위해 설계된 별도의 계층으로, 트랜잭션을 오프체인에서 처리한 후 그 결과를 메인넷에 기록함으로써 처리 속도를 높이고 수수료를 낮추는 것을 목표로 합니다.
- **레이어 2 종류**
    1. **사이드체인 (Sidechain)**
        - 사이드체인은 이더리움 메인넷(L1)과 2-way peg로 연결된 독립적인 블록체인입니다. 자체적인 합의 알고리즘과 블록 생성 규칙을 가지며, 메인넷과의 상호 운용성을 위해 스마트 컨트랙트를 사용합니다. 대표적인 사이드체인으로는 폴리곤(Polygon), 스케일 네트워크(Skale Network), xDai 등이 있습니다.
    2. **스테이트 채널 (State Channel)**
        - 스테이트 채널은 두 거래 당사자가 온체인에서 채널을 개설한 후, 오프체인에서 다수의 거래를 수행하고 최종 결과만을 온체인에 기록하는 방식입니다. 이를 통해 빠르고 저렴한 거래 처리가 가능하지만, 채널 개설과 종료 시 온체인 트랜잭션이 필요하며, 모든 참여자가 온라인 상태여야 하는 등의 제한이 있습니다.
    3. **롤업(Rollups), 발리디움(Validium), 플라즈마(Plasma)**
        - **롤업(Rollups):** 트랜잭션을 오프체인에서 실행하고 그 결과를 압축하여 온체인에 기록하는 방식입니다. 롤업은 옵티미스틱 롤업과 ZK 롤업으로 나뉘며, 각각 트랜잭션의 유효성을 검증하는 방식에 차이가 있습니다.
            - 수많은 디앱들이 EVM호환 가능한 ZK롤업이 출시되기만을 기다리고 있다.
        - **발리디움(Validium):** ZK 롤업(TPS 3000)과 유사하게 영지식 증명을 사용하지만, 트랜잭션 데이터를 오프체인에 저장하여 확장성을 높이는(TPS 9000) 방식입니다. 그러나 데이터 가용성 문제를 해결하기 위해 데이터 가용성 위원회(DAC)와 같은 중앙화된 조직에 의존해야 하는 단점이 있습니다.
        - **플라즈마(Plasma):** 메인 체인 위에 자식 체인(플라즈마 체인)을 생성하여 트랜잭션을 처리하는 방식입니다. 각 플라즈마 체인은 독립적으로 운영되며, 메인 체인과의 상호작용을 통해 보안을 유지합니다. 그러나 데이터 가용성 문제와 대규모 출금 시 지연 등의 단점이 있습니다.
        - **볼리션(Volition = zkRollups + Validium)**: ZK롤업과 발리디움을 둘 다 제공해주는 L2솔루션
- **레이어 2 장단점 비교**: [https://xangle.io/research/detail/453](https://xangle.io/research/detail/453)

## 비트코인 Layer

---

- [https://xangle.io/research/detail/1814](https://xangle.io/research/detail/1814)
- **비트코인 자본의 비활성 상태:** 비트코인의 시가총액이 8,500억 달러를 넘어서지만, 상당 부분이 비활성 상태로 남아 있습니다. 이는 네트워크의 프로그래밍 가능성 부족, 기술적 확장성 한계, 개발자 커뮤니티 내 문화적 요인 등으로 인한 것입니다.
- **비트코인 잠재력의 발현:** 스마트 컨트랙트 활용과 트랜잭션 속도 개선 등의 노력을 통해 비트코인의 잠재력이 드러나고 있습니다. 이는 비트코인이 단순한 가치 저장 수단을 넘어 무신뢰 금융 시스템의 기반 기술 플랫폼으로 진화하고 있음을 보여줍니다.
- **오디널스(Ordinals)의 등장:** 오디널스 프로토콜의 도입은 비트코인 레이어1에서 '비트코인 NFT'와 같은 새로운 애플리케이션의 사용을 촉진하며, 이는 비트코인 빌더 문화의 르네상스를 불러왔습니다. 그러나 이로 인해 트랜잭션 수수료 상승 등 성능 및 확장성 한계도 드러났습니다.
- **비트코인 레이어의 확장성 집중:** 이더리움의 레이어 아키텍처와 유사한 '비트코인 레이어' 개념이 부상하고 있습니다. 이는 비트코인의 보안과 안정성을 활용하면서도 프로그래밍 가능성, 향상된 트랜잭션 속도, 데이터 가용성 등을 제공하여 한계를 극복하려는 전략적 움직임입니다.
- **레이어2 솔루션의 필요성:** 비트코인 레이어1의 한계를 보완하기 위해 스택스(Stacks)와 같은 레이어2 솔루션이 주목받고 있습니다. 이러한 솔루션은 스마트 컨트랙트 지원, BTC 자산의 애플리케이션 도입, 보안 강화, 빠른 트랜잭션 제공 등을 목표로 합니다.
- **제도적 채택의 유리한 위치:** 2024년 반감기를 앞두고 비트코인 레이어2 개발이 지속되며, 이는 확장 가능하고 안전한 생태계를 조성하고 있습니다. 비트코인 현물 ETF 승인 등 제도적 관심이 증가하면서, 비트코인은 새로운 무신뢰 금융 패러다임의 선두주자로 자리매김하고 있습니다.

## 비트코인 Layer2

---

- [https://xangle.io/research/detail/1873](https://xangle.io/research/detail/1873)
- **진화하는 비트코인 논거**
    - 비트코인은 초기의 가치 저장 수단을 넘어 탈중앙화 애플리케이션(dApp) 플랫폼으로서의 잠재력을 보이고 있습니다. 이는 오디널스(Ordinals)와 같은 혁신적인 프로토콜의 도입과 '비트코인 기반 구축' 문화의 확산에 기인합니다.
- **네트워크 대 자산**
    - 비트코인 네트워크와 디지털 자산인 BTC는 구별되어야 합니다. 비트코인 네트워크는 탈중앙화된 정산 레이어로서의 역할을 수행하며, BTC는 가치 저장 수단으로 활용됩니다. 비트코인 레이어2 솔루션은 이 두 요소를 결합하여 확장성과 프로그래밍 기능을 향상시킵니다.
- **비트코인 기반 구축**
    - 비트코인 블록체인을 기반으로 한 인프라 개발은 독특한 기회와 과제를 제공합니다. 다른 블록체인과 달리, 비트코인은 자산으로 시작되어 애플리케이션 플랫폼으로의 전환이 필요합니다. 이는 개발자 커뮤니티의 적극적인 참여와 혁신을 요구합니다.
- **비트코인의 확장: 주요 레이어 1 업그레이드**
    - 비트코인의 확장성을 높이기 위한 레이어1 업그레이드가 진행되고 있습니다. 이는 트랜잭션 처리 속도 향상과 수수료 절감을 목표로 하며, 비트코인 네트워크의 전반적인 성능 개선을 추구합니다.
- **오디널스가 가져온 비트코인 빌더 문화의 부활**
    - 오디널스 프로토콜의 도입은 비트코인 레이어1에서 새로운 애플리케이션의 개발을 촉진하였습니다. 이는 비트코인 개발자 커뮤니티의 활력을 불어넣고, 다양한 혁신을 이끌어내는 계기가 되었습니다.
- **레이어2 솔루션의 전략적 필요성**
    - 비트코인 레이어1의 한계를 보완하기 위해 레이어2 솔루션이 주목받고 있습니다. 이러한 솔루션은 스마트 컨트랙트 지원, BTC 자산의 활용 확대, 보안 강화, 빠른 트랜잭션 제공 등을 목표로 하며, 비트코인 생태계의 확장을 촉진합니다.
